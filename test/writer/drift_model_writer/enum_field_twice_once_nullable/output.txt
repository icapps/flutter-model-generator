// GENERATED CODE - DO NOT MODIFY BY HAND

import 'package:drift/drift.dart';
import 'package:model_generator_example/database/model_generator_example_database.dart';
import 'package:model_generator_example/model/user/person/gender.dart';
import 'package:model_generator_example/model/user/person/person.dart';

@DataClassName('DbPerson')
class DbPersonTable extends Table {
  TextColumn get firstName => text()();

  TextColumn get prefferedGender => text().map(const PersonTableGenderConverter())();

  TextColumn get birthGender => text().map(const PersonTableGenderNullableConverter()).nullable()();
}

extension DbPersonExtension on DbPerson {
  Person get model => Person(
        firstName: firstName,
        prefferedGender: prefferedGender,
        birthGender: birthGender,
      );
}

extension PersonExtension on Person {
  DbPerson get dbModel => DbPerson(
        firstName: firstName,
        prefferedGender: prefferedGender,
        birthGender: birthGender,
      );
}

class PersonTableGenderConverter extends TypeConverter<Gender, String> {
  const PersonTableGenderConverter();

  @override
  Gender fromSql(String fromDb) {
    for (final value in Gender.values) {
      if (value.jsonValue == fromDb) return value;
    }
    return Gender.values.first;
  }

  @override
  String toSql(Gender value) {
    return value.jsonValue;
  }
}

class PersonTableGenderNullableConverter extends TypeConverter<Gender?, String?> {
  const PersonTableGenderNullableConverter();

  @override
  Gender? fromSql(String? fromDb) {
    for (final value in Gender.values) {
      if (value.jsonValue == fromDb) return value;
    }
    return null;
  }

  @override
  String? toSql(Gender? value) {
    return value?.jsonValue;
  }
}
